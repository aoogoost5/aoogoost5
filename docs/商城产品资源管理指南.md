# 商城产品资源管理指南

## 概述

本指南旨在规范五行项目中商城产品资源的管理流程，确保数字资产的安全、高效分发和版权保护。商城产品资源是项目的核心商业资产，必须采取严格的保护措施。

## 资源分类

商城产品资源主要分为以下几类：

1. **五行能量符号**：基于用户八字分析生成的个性化图像资源
2. **节气图册**：24节气相关的专题图像资源
3. **音频资源**：与五行能量相关的冥想、疗愈音频
4. **教程资源**：付费教程和指导材料

## 存储策略

### 对象存储服务

所有商城产品资源**必须**使用对象存储服务进行存储和分发，推荐选择：

- 阿里云OSS（国内用户）
- AWS S3（国际用户）
- 七牛云对象存储

### 目录结构

对象存储中的目录结构建议如下：

```
shop-assets/
├── symbols/                # 五行能量符号
│   ├── basic/              # 基础系列
│   ├── premium/            # 高级系列
│   └── custom/             # 定制系列
├── seasonal/               # 节气系列
│   ├── spring/             # 春季节气
│   ├── summer/             # 夏季节气
│   └── ...
├── audio/                  # 音频资源
└── tutorials/              # 教程资源
```

## 访问控制

### 权限设置

1. **公开预览资源**：低分辨率、带水印的预览图，可公开访问
2. **付费资源**：高分辨率、无水印的原始资源，需要授权访问

### 访问机制

- 使用签名URL进行临时授权访问
- URL有效期设置为24小时
- 限制单个用户的访问频率和下载次数

## 水印与版权保护

### 水印策略

所有商城产品资源应添加：

1. **可见水印**：
   - 预览图：明显的品牌水印
   - 付费资源：半透明的小型品牌标识

2. **隐形水印**：
   - 使用数字隐写技术嵌入用户ID和购买信息
   - 便于追踪资源泄露来源

### 版权声明

每个资源文件的元数据中应包含：

- 版权所有者信息
- 使用许可范围
- 创建日期
- 唯一资源ID

## 资源更新与版本控制

### 版本命名规则

使用语义化版本号：`{主版本}.{次版本}.{修订号}`

示例：`symbol-wood-1.2.3.png`

### 更新流程

1. 新版本资源上传至临时目录
2. 质检通过后替换生产环境资源
3. 保留旧版本30天，之后归档

## 备份策略

### 定期备份

- 每日增量备份
- 每周完整备份
- 每月归档备份

### 多区域备份

关键资源应在多个地理区域进行备份，确保数据安全和访问速度

## MVP阶段特别说明

在MVP阶段，为了加速开发和测试，我们采用以下临时策略：

1. 在项目仓库中创建`shop-assets`目录，用于存放开发测试所需的少量示例资源
2. 这些资源**不应**包含完整的商业产品资源，仅作为功能开发参考
3. 在`.gitignore`中添加相应规则，确保商业资源不会被提交到代码仓库
4. 尽早建立对象存储服务，并在开发中模拟实际的资源获取流程

## 资源审计与监控

### 定期审计

每季度对商城产品资源进行全面审计：

- 访问日志分析
- 异常下载行为检测
- 资源完整性检查

### 实时监控

设置自动化监控系统，对以下情况发出警报：

- 异常访问量
- 未授权访问尝试
- 资源完整性变化

## 责任分工

| 角色 | 责任范围 |
|------|---------|
| 产品经理 | 资源分类与命名规范制定 |
| 设计师 | 资源创建与水印添加 |
| 开发工程师 | 访问控制与分发系统实现 |
| 运维工程师 | 存储服务配置与监控 |

## 应急预案

如发现资源泄露或未授权使用：

1. 立即更换受影响资源的访问链接
2. 通过隐形水印追踪泄露源
3. 更新访问控制策略
4. 通知相关用户和团队成员

---

本指南将随项目发展持续更新，确保商城产品资源得到最佳保护和管理。 